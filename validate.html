<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validate</title>
    <!-- <script src="https://cdn.tailwindcss.com"></script> -->
    
</head>
<body>
    <div class="container w-3/6 m-auto">
        <h1>Form pendaftaran</h1>
        <label for="email"> Email : <br>
            <input type="email" name="email" id="email" placeholder="Email" > <br>
            <span id="email-error"></span>
        </label>
        <br>
        <label for="password"> Password : <br>
            <input type="password" name="password" id="password" placeholder="Password">
        </label>
        <br>
        <br>
        <button id="regist-btn" >Regist!</button>

        <div id="login">

        </div>
    </div>

    <script>
        const email = document.getElementById('email');
        const password = document.getElementById('password');
        const emailError = document.getElementById('email-error');
        const registBtn = document.getElementById('regist-btn');
        const login = document.getElementById('login');

        const handleError = (isError) => {
            if (isError) {
                emailError.innerHTML = 'Email harus berakhiran gmail.com';
                emailError.style.color = 'red';
                registBtn.setAttribute('disabled', 'disabled');
            } else {
                emailError.innerHTML = '';
                registBtn.removeAttribute('disabled');
            }
        }

        
        email.addEventListener('input', function(){
            const dataEmail = email.value;
            let splitEmail = dataEmail.split('@');
            let lastIndex = splitEmail.length - 1;
            console.log(splitEmail[lastIndex])

            let isError = true;
            (splitEmail[lastIndex] == 'mahasiswa.upn.ac.id') ? isError = false : isError = true;

            handleError(isError);
        })

        registBtn.addEventListener('click', () => {
            const registeredUser = {
                email: email.value,
                password: password.value
            }

            console.log(registeredUser);
            
            login.innerHTML = `
            <h1>Hasil Registrasi</h1>
            <p>Email : ${registeredUser.email}</p>
            <p>Password : ${registeredUser.password}</p>
            `;
        })
    </script>
</body>
</html>